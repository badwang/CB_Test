/********************************************************
【平    台】北京龙丘智能科技淘宝店
【编    写】龙丘科技整理，原创阿呆
【Designed】by Chiu Sir
【E-mail  】chiusir@yahoo.cn
【软件版本】V1.0
【最后更新】2012年9月9日
【dev.env.】KEIL UV3.0
【Target  】STC/AT89C52/STC12C5A60S2/STC12LE5A60S2
【Crystal 】11.0592M/22.1184Mhz

3.3V接线说明：
1.下载本程序到单片机
2.插线(注意单片机的这几个管脚不要有外围电路)：
    GND	地
	VCC 3.3V(裸屏必须用3.3V供电)
	RESET=  P1^0; 
	A0   =  P1^1;
	SDI  =  P1^2;
	SCK  =  P1^3;	 
	CS   =  P1^4;
（5V的单片机需要在信号线上串接1K电阻，电源必须保证3.3V）
********************************************************/
#include "LQ_SGP18T.h"
#include "PE_KSDK_Types.h"
#include "gpio.h"
#include "FreeRTOS1.h"

/**********************************************************
函数名称：ILI9163B_init()
入口参数：无
出口参数：无
时间：2012/8/8
功能说明：器件初始化
其他说明：无
**********************************************************/
void ILI9163B_init(void)
{ 	
    ILI9163B_write_command(0x11);       		  	//关闭睡眠，振荡器工作
    vTaskDelay(20);									//Delay 100mS
    
    ILI9163B_write_command(0x3a);       		  	//每次传送16位数据(VIPF3-0=0101)，每个像素16位(IFPF2-0=101)
    ILI9163B_write_para8(0x55);						
   
    ILI9163B_write_command(0x26);       		  	
    ILI9163B_write_para8(0x04);
	
    ILI9163B_write_command(0xf2);              		//Driver Output Control(1)
    ILI9163B_write_para8(0x01);
    
    ILI9163B_write_command(0xe0);              		//Driver Output Control(1)
    ILI9163B_write_para8(0x3f);
    ILI9163B_write_para8(0x25);
    ILI9163B_write_para8(0x1c);
   	ILI9163B_write_para8(0x1e);
    ILI9163B_write_para8(0x20);
    ILI9163B_write_para8(0x12);
    ILI9163B_write_para8(0x2a);
    ILI9163B_write_para8(0x90);
    ILI9163B_write_para8(0x24);
    ILI9163B_write_para8(0x11);
    ILI9163B_write_para8(0x00);
    ILI9163B_write_para8(0x00);
    ILI9163B_write_para8(0x00);
    ILI9163B_write_para8(0x00);
    ILI9163B_write_para8(0x00);
     
    ILI9163B_write_command(0xe1);              //Driver Output Control(1)
    ILI9163B_write_para8(0x20);
    ILI9163B_write_para8(0x20);
    ILI9163B_write_para8(0x20);
    ILI9163B_write_para8(0x20);
    ILI9163B_write_para8(0x05);
    ILI9163B_write_para8(0x00);
    ILI9163B_write_para8(0x15);
    ILI9163B_write_para8(0xa7);
    ILI9163B_write_para8(0x3d);
    ILI9163B_write_para8(0x18);
    ILI9163B_write_para8(0x25);
    ILI9163B_write_para8(0x2a);
    ILI9163B_write_para8(0x2b);
    ILI9163B_write_para8(0x2b);  
    ILI9163B_write_para8(0x3a);  
    
    ILI9163B_write_command(0xb1);              	//设置屏幕刷新频率
    ILI9163B_write_para8(0x08);				   	//DIVA=8
    ILI9163B_write_para8(0x08);				   	//VPA =8，约90Hz
    				   
    ILI9163B_write_command(0xb4);              	//LCD Driveing control
    ILI9163B_write_para8(0x07);				  	//NLA=1,NLB=1,NLC=1
   
   
    ILI9163B_write_command(0xc0);              //LCD Driveing control
    ILI9163B_write_para8(0x0a);
    ILI9163B_write_para8(0x02);
      
    ILI9163B_write_command(0xc1);              //LCD Driveing control
    ILI9163B_write_para8(0x02);

    ILI9163B_write_command(0xc5);              //LCD Driveing control
    ILI9163B_write_para8(0x4f);
   	ILI9163B_write_para8(0x5a);

    ILI9163B_write_command(0xc7);              //LCD Driveing control
    ILI9163B_write_para8(0x40);
    
    ILI9163B_write_command(0x2a);              	//配置MCU可操作的LCD内部RAM横坐标起始、结束参数
    ILI9163B_write_para8(0x00);				   	//横坐标起始地址0x0000
    ILI9163B_write_para8(0x00);					
    ILI9163B_write_para8(0x00);				   	//横坐标结束地址0x007f(127)
    ILI9163B_write_para8(0x7f);
   
    ILI9163B_write_command(0x2b);              	//配置MCU可操作的LCD内部RAM纵坐标起始结束参数
    ILI9163B_write_para8(0x00);				   	//纵坐标起始地址0x0000
    ILI9163B_write_para8(0x00);
    ILI9163B_write_para8(0x00);				  	//纵坐标结束地址0x009f(159)
    ILI9163B_write_para8(0x9f);

    ILI9163B_write_command(0x36);              	//配置MPU和DDRAM对应关系
    ILI9163B_write_para8(0xc0);					//MX=1,MY=1

    ILI9163B_write_command(0xb7);              	//LCD Driveing control
    ILI9163B_write_para8(0x00);				   	//CRL=0
	   
    ILI9163B_write_command(0x29);   		  	//开启屏幕显示
    ILI9163B_write_command(0x2c);   			//设置为LCD接收数据/命令模式
  
}


/******************DRIVE IC寄存器寻址 8080 SERIES*******************************/
void ILI9163B_write_command(uint8 cmd)
{
	uint8 i;

	GPIO_DRV_WritePinOutput(ILI9163_A0, 0);	 						//A0=0发送命令
	GPIO_DRV_WritePinOutput(ILI9163_CS, 0);
	for(i=0;i<8;i++)
	{
		GPIO_DRV_WritePinOutput(ILI9163_SCK, 0);
//		if((addr1&0x80)==0x80)	  	//高位先发送
//			ILI9163_SDA=1;
//		else		
//			ILI9163_SDA=0;
		GPIO_DRV_WritePinOutput(ILI9163_SDA, (0x80&cmd));
		GPIO_DRV_WritePinOutput(ILI9163_SCK, 1);
		cmd = (cmd<<1);

	}
	GPIO_DRV_WritePinOutput(ILI9163_CS, 1);
}

/*****************DRIVE IC寄存器写数据 8080 SERIES******************************/
void ILI9163B_write_para8(uint8 dat)
{  
	uint8 i;

	GPIO_DRV_WritePinOutput(ILI9163_A0, 1);			   				//A0=1发送数据
	GPIO_DRV_WritePinOutput(ILI9163_CS, 0);
	for(i=0;i<8;i++)
	{
		GPIO_DRV_WritePinOutput(ILI9163_SCK, 0);
//		if((para&0x80)==0x80)
//			ILI9163_SDA=1;
//		else
//			ILI9163_SDA=0;
		GPIO_DRV_WritePinOutput(ILI9163_SDA, (0x80&dat));
		GPIO_DRV_WritePinOutput(ILI9163_SCK, 1);
		dat = (dat<<1);

	}
	GPIO_DRV_WritePinOutput(ILI9163_CS, 1);
}
 
/****************DRIVE IC GDRAM 写数据 16BITS 8080 SERIES*****************************/
void ILI9163B_write_para16(uint16 dat)
{  		 
	uint8 i,buf;

	GPIO_DRV_WritePinOutput(ILI9163_A0, 1);
	GPIO_DRV_WritePinOutput(ILI9163_CS, 0);

	buf = (uint8)(0xFF&(dat>>8));
	for(i=0;i<8;i++)
	{
		GPIO_DRV_WritePinOutput(ILI9163_SCK, 0);
//		if((buf&0x80)==0x80)
//			ILI9163_SDA=1;
//		else
//			ILI9163_SDA=0;
		GPIO_DRV_WritePinOutput(ILI9163_SDA, (0x80&buf));
		GPIO_DRV_WritePinOutput(ILI9163_SCK, 1);
		buf=(buf<<1);

	}
	GPIO_DRV_WritePinOutput(ILI9163_CS, 1);

	buf = (uint8)(0xFF&dat);
	GPIO_DRV_WritePinOutput(ILI9163_CS, 0);
	for(i=0;i<8;i++)
	{
		GPIO_DRV_WritePinOutput(ILI9163_SCK, 0);
//		if((buf&0x80)==0x80)
//			ILI9163_SDA=1;
//		else
//			ILI9163_SDA=0;
		GPIO_DRV_WritePinOutput(ILI9163_SDA, (0x80&buf));
		GPIO_DRV_WritePinOutput(ILI9163_SCK, 1);
		buf=(buf<<1);
	}
	GPIO_DRV_WritePinOutput(ILI9163_CS, 1);
}


/**********************************************************
函数名称：ILI9163B_SetPos()
入口参数：起始终止坐标
出口参数：无
时间：2012/8/8
功能说明：重新定位输入信息位置
其他说明：无
**********************************************************/
void ILI9163B_SetPos(uint8 xs,uint8 ys,uint8 xe,uint8 ye)
{
	ILI9163B_write_command(0x2A);      	//Colulm addRSTs set
	ILI9163B_write_para8(0x00);			//行起始坐标高8位，始终为零
	ILI9163B_write_para8(xs);			//行起始坐标低8位
	ILI9163B_write_para8(0x00);			//行终止坐标高8位，始终为零
	ILI9163B_write_para8(xe);			//行终止坐标低8位

	ILI9163B_write_command(0x2B);      	//Colulm addRSTs set
	ILI9163B_write_para8(0x00);			//列起始坐标高8位，始终为零
	ILI9163B_write_para8(ys);			//列起始坐标低8位
	ILI9163B_write_para8(0x00);			//列终止坐标高8位，始终为零
	ILI9163B_write_para8(ye);			//列终止坐标低8位

	ILI9163B_write_command(0x2C);      	//GRAM接收MCU数据或命令
}


/**********************************************************
函数名称：ILI9163B_address_rst()
入口参数：无
出口参数：无
时间：2012/8/8
功能说明：重置地址
其他说明：无
**********************************************************/
void ILI9163B_address_rst(void)
{
    ILI9163B_write_command(0x2a);              	//配置MCU可操作的LCD内部RAM横坐标起始、结束参数
    ILI9163B_write_para8(0x00);				   	//横坐标起始地址0x0000
    ILI9163B_write_para8(0x00);					
    ILI9163B_write_para8(0x00);				   	//横坐标结束地址0x007f(127)
    ILI9163B_write_para8(0x7f);
   
    ILI9163B_write_command(0x2b);              	//配置MCU可操作的LCD内部RAM纵坐标起始结束参数
    ILI9163B_write_para8(0x00);				   	//纵坐标起始地址0x0000
    ILI9163B_write_para8(0x00);
    ILI9163B_write_para8(0x00);				  	//纵坐标结束地址0x009f(159)
    ILI9163B_write_para8(0x9f);

	ILI9163B_write_command(0x2C);      	//GRAM接收MCU数据或命令
}



/**********************************************************
函数名称：ILI9163B_display_full()
入口参数：color为常用的需要显示的颜色(已经提前定义)，color为
		  NULL时，则可将不常用颜色放入dat中加以显示
出口参数：无
时间：2012-09-09
功能说明：全屏显示单色画面
其他说明：无
**********************************************************/
void ILI9163B_display_full(uint16 color)
{
  	unsigned int i,j;
	
	ILI9163B_address_rst();

 	for(i=0;i<160;i++)
	{
     	for(j=0;j<128;j++)
        {
			ILI9163B_write_para16(color);
        }
	}
}


/**********************************************************
函数名称：ILI9163B_draw_part()
入口参数：起始、终止横坐标(0-127)，纵坐标(0-159),显示颜色uint16
出口参数：无
时间：2012-09-09
功能说明：填充矩形区域
其他说明：0<=xs<xe<=127
		  0<=ys<ye<=159
**********************************************************/
void ILI9163B_draw_part(uint8 xs,uint8 ys,uint8 xe,uint8 ye,uint16 color_dat)
{
	uint8 i,j;

	ILI9163B_SetPos(xs,ys,xe,ye);	
	for(j=0;j<(ye-ys+1);j++)
    {
    	for(i=0;i<(xe-xs+1);i++)
		{
			ILI9163B_write_para16(color_dat);
		}
	}   
}

/**********************************************************
函数名称：ILI9163B_draw_rectangle()
入口参数：起始、终止横坐标(0-127)，纵坐标(0-159),显示颜色uint16
出口参数：无
时间：2012-09-09
功能说明：画矩形边框
其他说明：0<=xs<xe<=127
		  0<=ys<ye<=159
**********************************************************/
void ILI9163B_draw_rectangle(uint8 xs,uint8 ys,uint8 xe,uint8 ye,uint16 color_dat)
{
	ILI9163B_draw_line(xs,ys,xs,ye,color_dat);	  //画矩形左边
	ILI9163B_draw_line(xe,ys,xe,ye,color_dat);	  //画矩形右边
	ILI9163B_draw_line(xs,ys,xe,ys,color_dat);	  //画矩形上边
	ILI9163B_draw_line(xs,ye,xe,ye,color_dat);	  //画矩形下边
}


/**********************************************************
函数名称：ILI9163B_draw_circle()
入口参数：圆心横坐标(0-127)，纵坐标(0-159),半径(0-128),显示颜色uint16
出口参数：无
时间：2012-09-09
功能说明：画圆形边框(仅支持屏幕内画圆)
其他说明：0<=x<=127
		  0<=y<=159
**********************************************************/
void ILI9163B_draw_circle(uint8 x,uint8 y,uint8 r,uint16 color_dat)
{
	unsigned char dx, dy = r; 

	if((x>=r) &&((128-x)>=r) && (y>=r) && ((160-y)>=r))		//确定所画圆在屏幕范围内，没有超出最外边，(暂不支持与屏幕边相交)
	{
		for(dx = 0; dx <= r; dx++)
		{
			while((r * r + 1 - dx * dx) < (dy * dy)) dy--;
			ILI9163B_draw_dot(x + dx, y - dy, color_dat);
			ILI9163B_draw_dot(x - dx, y - dy, color_dat);
			ILI9163B_draw_dot(x - dx, y + dy, color_dat);
			ILI9163B_draw_dot(x + dx, y + dy, color_dat);

			ILI9163B_draw_dot(x + dy, y - dx, color_dat);
			ILI9163B_draw_dot(x - dy, y - dx, color_dat);
			ILI9163B_draw_dot(x - dy, y + dx, color_dat);
			ILI9163B_draw_dot(x + dy, y + dx, color_dat);
	}
	}



}


/**********************************************************
函数名称：ILI9163B_draw_line()
入口参数：起始、终止横坐标(0-127)，纵坐标(0-159),显示颜色uint16
出口参数：无
时间：2012-09-09
功能说明：画直线
其他说明：0<=xs<xe<=127
		  0<=ys<ye<=159
**********************************************************/
void ILI9163B_draw_line(uint8 xs,uint8 ys,uint8 xe,uint8 ye,uint16 color_dat)
{
	uint8 i,ds;
	int dx,dy,inc_x, inc_y;
	int xerr = 0, yerr = 0;				//初始化变量

	if(xs==xe)	  						//如果是画垂直线则只需对竖直坐标计数
	{
    	ILI9163B_SetPos(xs,ys,xe,ye);
		for(i=0;i<(ye-ys+1);i++)
		{
			ILI9163B_write_para16(color_dat);
		}
	}
	else if(ys==ye)						//如果是水平线则只需要对水平坐标计数
    {
 		ILI9163B_SetPos(xs,ys,xe,ye);
 	  	for(i=0;i<(xe-xs+1);i++)
		{
			ILI9163B_write_para16(color_dat);
		}
	} 
	else											//如果是斜线，则重新计算，使用画点函数画出直线
	{
    	dx = xe - xs;								//计算坐标增量
    	dy = ye - ys;

		if(dx > 0) inc_x = 1;						//设置单步方向
		else 
		{
			inc_x = -1; dx = -dx;
		}
		if(dy > 0) inc_y = 1;						//设置单步方向
		else
	    {
			inc_y = -1; dy = -dy;
		}

		if(dx > dy) ds = dx;						//选取基本增量坐标轴
		else		ds = dy;

		for(i = 0; i <= ds+1; i++)					//画线输出
		{
			ILI9163B_draw_dot(xs, ys,color_dat);	//画点
			xerr += dx;
			yerr += dy;
			if(xerr > ds)
			{
				xerr -= ds;
				xs   += inc_x;
			}
			if(yerr > ds)
			{
				yerr -= ds;
				ys   += inc_y;
			}
		}
	}  
}

/**********************************************************
函数名称：ILI9163B_draw_dot()
入口参数：起始横坐标(0-127)，纵坐标(0-159),显示颜色uint16
出口参数：无
时间：2012-09-09
功能说明：画点
其他说明：0<=x<=127
		  0<=y<=159
**********************************************************/
void ILI9163B_draw_dot(uint8 x,uint8 y,uint16 color_dat)
{
	ILI9163B_SetPos(x,y,x,y);
	ILI9163B_write_para16(color_dat);
}
/*--------------------------------------------------------------*/
//字库码的引索
/*
  (0)  !(1)  "(2)  #(3)  $(4)  %(5)  &(6)  '(7)
 ((8)  )(9)  *(10) +(11) ,(12) -(13) .(14) /(15)
 0(16) 1(17) 2(18) 3(19) 4(20) 5(21) 6(22) 7(23)
 8(24) 9(25) :(26) ;(27) <(28) =(29) >(30) ?(31)
 @(32) A(33) B(34) C(35) D(36) E(37) F(38) G(39)
 H(40) I(41) J(42) K(43) L(44) M(45) N(46) O(47)
 P(48) Q(49) R(50) S(51) T(52) U(53) V(54) W(55)
 X(56) Y(57) Z(58) [(59) \(60) ](61) ^(62) _(63)
 `(64) a(65) b(66) c(67) d(68) e(69) f(70) g(71)
 h(72) i(73) j(74) k(75) l(76) m(77) n(78) o(79)
 p(80) q(81) r(82) s(83) t(84) u(85) v(86) w(87)
 x(88) y(89) z(90) {(91) |(92) }(93) ~(94)
/*--------------------------------------------------------------*/


/*--------------------------------------------------------------*/
//	  字体:	8*6字体
//取码规则:	低位在前, 列行扫描, 阴码(1-亮, 0-灭)
//查表方法: 要显示的ASCII码-32就可以得到字库码的指针
unsigned char const Font_code8[][6] = {
{0x00,0x00,0x00,0x00,0x00,0x00},// (0)
{0x00,0x00,0x00,0x4F,0x00,0x00},//!(1)
{0x00,0x00,0x07,0x00,0x07,0x00},//"(2)
{0x00,0x14,0x7F,0x14,0x7F,0x14},//#(3)
{0x00,0x24,0x2A,0x7F,0x2A,0x12},//$(4)
{0x00,0x23,0x13,0x08,0x64,0x62},//%(5)
{0x00,0x36,0x49,0x55,0x22,0x50},//&(6)
{0x00,0x00,0x05,0x03,0x00,0x00},//'(7)
{0x00,0x00,0x1C,0x22,0x41,0x00},//((8)
{0x00,0x00,0x41,0x22,0x1C,0x00},//)(9)
{0x00,0x14,0x08,0x3E,0x08,0x14},//*(10)
{0x00,0x08,0x08,0x3E,0x08,0x08},//+(11)
{0x00,0x00,0x50,0x30,0x00,0x00},//,(12)
{0x00,0x08,0x08,0x08,0x08,0x08},//-(13)
{0x00,0x00,0x60,0x60,0x00,0x00},//.(14)
{0x00,0x20,0x10,0x08,0x04,0x02},///(15)
{0x00,0x3E,0x51,0x49,0x45,0x3E},//0(16)
{0x00,0x00,0x42,0x7F,0x40,0x00},//1(17)
{0x00,0x42,0x61,0x51,0x49,0x46},//2(18)
{0x00,0x21,0x41,0x45,0x4B,0x31},//3(19)
{0x00,0x18,0x14,0x12,0x7F,0x10},//4(20)
{0x00,0x27,0x45,0x45,0x45,0x39},//5(21)
{0x00,0x3C,0x4A,0x49,0x49,0x30},//6(22)
{0x00,0x01,0x71,0x09,0x05,0x03},//7(23)
{0x00,0x36,0x49,0x49,0x49,0x36},//8(24)
{0x00,0x06,0x49,0x49,0x29,0x1E},//9(25)
{0x00,0x00,0x36,0x36,0x00,0x00},//:(26)
{0x00,0x00,0x56,0x36,0x00,0x00},//;(27)
{0x00,0x08,0x14,0x22,0x41,0x00},//<(28)
{0x00,0x14,0x14,0x14,0x14,0x14},//=(29)
{0x00,0x00,0x41,0x22,0x14,0x08},//>(30)
{0x00,0x02,0x01,0x51,0x09,0x06},//?(31)
{0x00,0x32,0x49,0x79,0x41,0x3E},//@(32)
{0x00,0x7E,0x11,0x11,0x11,0x7E},//A(33)
{0x00,0x7F,0x49,0x49,0x49,0x3E},//B(34)
{0x00,0x3E,0x41,0x41,0x41,0x22},//C(35)
{0x00,0x7F,0x41,0x41,0x22,0x1C},//D(36)
{0x00,0x7F,0x49,0x49,0x49,0x41},//E(37)
{0x00,0x7F,0x09,0x09,0x09,0x01},//F(38)
{0x00,0x3E,0x41,0x49,0x49,0x7A},//G(39)
{0x00,0x7F,0x08,0x08,0x08,0x7F},//H(40)
{0x00,0x00,0x41,0x7F,0x41,0x00},//I(41)
{0x00,0x20,0x40,0x41,0x3F,0x01},//J(42)
{0x00,0x7F,0x08,0x14,0x22,0x41},//K(43)
{0x00,0x7F,0x40,0x40,0x40,0x40},//L(44)
{0x00,0x7F,0x02,0x04,0x02,0x7F},//M(45)
{0x00,0x7F,0x04,0x08,0x10,0x7F},//N(46)
{0x00,0x3E,0x41,0x41,0x41,0x3E},//O(47)
{0x00,0x7F,0x09,0x09,0x09,0x06},//P(48)
{0x00,0x3E,0x41,0x51,0x21,0x5E},//Q(49)
{0x00,0x7F,0x09,0x19,0x29,0x46},//R(50)
{0x00,0x46,0x49,0x49,0x49,0x31},//S(51)
{0x00,0x01,0x01,0x7F,0x01,0x01},//T(52)
{0x00,0x3F,0x40,0x40,0x40,0x3F},//U(53)
{0x00,0x1F,0x20,0x40,0x20,0x1F},//V(54)
{0x00,0x3F,0x40,0x38,0x40,0x3F},//W(55)
{0x00,0x63,0x14,0x08,0x14,0x63},//X(56)
{0x00,0x03,0x04,0x78,0x04,0x03},//Y(57)
{0x00,0x61,0x51,0x49,0x45,0x43},//Z(58)
{0x00,0x00,0x7F,0x41,0x41,0x00},//[(59)
{0x00,0x15,0x16,0x7C,0x16,0x15},//\(60)
{0x00,0x00,0x41,0x41,0x7F,0x00},//](61)
{0x00,0x04,0x02,0x01,0x02,0x04},//^(62)
{0x00,0x40,0x40,0x40,0x40,0x40},//_(63)
{0x00,0x00,0x01,0x02,0x04,0x00},//`(64)
{0x00,0x20,0x54,0x54,0x54,0x78},//a(65)
{0x00,0x7F,0x48,0x44,0x44,0x38},//b(66)
{0x00,0x38,0x44,0x44,0x44,0x20},//c(67)
{0x00,0x38,0x44,0x44,0x48,0x7F},//d(68)
{0x00,0x38,0x54,0x54,0x54,0x18},//e(69)
{0x00,0x08,0x7E,0x09,0x01,0x02},//f(70)
{0x00,0x0C,0x52,0x52,0x52,0x3E},//g(71)
{0x00,0x7F,0x08,0x04,0x04,0x78},//h(72)
{0x00,0x00,0x44,0x7D,0x40,0x00},//i(73)
{0x00,0x20,0x40,0x44,0x3D,0x00},//j(74)
{0x00,0x7F,0x10,0x28,0x44,0x00},//k(75)
{0x00,0x00,0x41,0x7F,0x40,0x00},//l(76)
{0x00,0x7E,0x02,0x0C,0x02,0x7C},//m(77)
{0x00,0x7E,0x04,0x02,0x02,0x7C},//n(78)
{0x00,0x38,0x44,0x44,0x44,0x38},//o(79)
{0x00,0x7C,0x14,0x14,0x14,0x08},//p(80)
{0x00,0x08,0x14,0x14,0x18,0x7C},//q(81)
{0x00,0x7C,0x08,0x04,0x04,0x08},//r(82)
{0x00,0x48,0x54,0x54,0x54,0x20},//s(83)
{0x00,0x04,0x3F,0x44,0x40,0x20},//t(84)
{0x00,0x3C,0x40,0x40,0x20,0x7C},//u(85)
{0x00,0x1C,0x20,0x40,0x20,0x1C},//v(86)
{0x00,0x3C,0x40,0x30,0x40,0x3C},//w(87)
{0x00,0x44,0x28,0x10,0x28,0x44},//x(88)
{0x00,0x0C,0x50,0x50,0x50,0x3C},//y(89)
{0x00,0x44,0x64,0x54,0x4C,0x44},//z(90)
{0x00,0x00,0x08,0x36,0x41,0x00},//{(91)
{0x00,0x00,0x00,0x7F,0x00,0x00},//|(92)
{0x00,0x00,0x41,0x36,0x08,0x00},//}(93)
{0x00,0x08,0x04,0x08,0x10,0x08},//~(94)
{0x00,0x08,0x08,0x2A,0x1C,0x08},//→(127)
{0x00,0x08,0x1C,0x2A,0x08,0x08},//←(128)
{0x00,0x04,0x02,0x7F,0x02,0x04},//↑(129)
{0x00,0x10,0x20,0x7F,0x20,0x10},//↓(130)
{0x00,0x1C,0x2A,0x32,0x2A,0x1C},//笑面(131)
{0x00,0x1C,0x22,0x44,0x22,0x1C}};//爱心(132)   


/*--------------------------------------------------------------*/
//	  字体:	GulimChe12
//取码规则:	高位在前, 行列扫描, 阴码(1-亮, 0-灭)
//查表方法: 要显示的ASCII码-32就可以得到字库码的指针
unsigned char const Font_code16[][16] = {
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},// (0)
{0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x10,0x10,0x00,0x00},//!(1)
{0x00,0x00,0x24,0x24,0x24,0x24,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//"(3)
{0x00,0x00,0x48,0x48,0x48,0xFE,0x24,0x24,0x24,0x24,0x24,0x7F,0x12,0x12,0x12,0x00},//#(4)
{0x00,0x10,0x7C,0x92,0x92,0x12,0x14,0x18,0x30,0x50,0x90,0x92,0x92,0x7C,0x10,0x00},//$(5)
{0x00,0x00,0x8C,0x92,0x52,0x32,0x2C,0x10,0x08,0x68,0x94,0x92,0x92,0x60,0x00,0x00},//%(6)
{0x00,0x00,0x18,0x24,0x24,0x24,0x18,0x98,0xA4,0xA2,0x42,0x42,0xA2,0x9C,0x00,0x00},//&(7)
{0x00,0x00,0x10,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//'(8)
{0x00,0x20,0x10,0x08,0x08,0x04,0x04,0x04,0x04,0x04,0x04,0x08,0x08,0x10,0x20,0x00},//((9)
{0x00,0x04,0x08,0x10,0x10,0x20,0x20,0x20,0x20,0x20,0x20,0x10,0x10,0x08,0x04,0x00},//)(10)
{0x00,0x00,0x00,0x00,0x00,0x08,0x2A,0x1C,0x14,0x22,0x00,0x00,0x00,0x00,0x00,0x00},//*(11)
{0x00,0x00,0x00,0x00,0x10,0x10,0x10,0xFE,0x10,0x10,0x10,0x00,0x00,0x00,0x00,0x00},//+(12)
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x08,0x00},//,(13)
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},//-(14)
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x00,0x00},//.(15)
{0x00,0x00,0x40,0x40,0x20,0x20,0x10,0x10,0x08,0x08,0x04,0x04,0x02,0x02,0x00,0x00},///(16)
{0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x44,0x38,0x00,0x00},//0(17)
{0x00,0x00,0x10,0x1C,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x40,0x40,0x20,0x10,0x08,0x04,0x02,0x02,0x7E,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x40,0x40,0x3C,0x40,0x40,0x40,0x42,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x60,0x60,0x50,0x50,0x48,0x48,0x44,0x44,0xFE,0x40,0x40,0x40,0x00,0x00},
{0x00,0x00,0x7E,0x02,0x02,0x02,0x3E,0x42,0x40,0x40,0x40,0x42,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x02,0x02,0x3E,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x7E,0x40,0x20,0x20,0x10,0x10,0x10,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x3C,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x42,0x7C,0x40,0x40,0x42,0x42,0x3C,0x00,0x00},//9(25)
{0x00,0x00,0x00,0x00,0x08,0x08,0x00,0x00,0x00,0x00,0x08,0x08,0x00,0x00,0x00,0x00},//:(26)
{0x00,0x00,0x00,0x00,0x10,0x10,0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x08,0x00,0x00},//;(27)
{0x00,0x00,0x00,0x40,0x30,0x08,0x06,0x01,0x06,0x08,0x30,0x40,0x00,0x00,0x00,0x00},//<(28)
{0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x00},//=(29)
{0x00,0x00,0x00,0x02,0x0C,0x10,0x60,0x80,0x60,0x10,0x0C,0x02,0x00,0x00,0x00,0x00},//>(30)
{0x00,0x00,0x38,0x44,0x82,0x82,0x40,0x20,0x10,0x10,0x10,0x00,0x10,0x10,0x00,0x00},//?(31)
{0x00,0x00,0x38,0x44,0x82,0xB2,0xAA,0xAA,0xAA,0xAA,0xD2,0x02,0x84,0x78,0x00,0x00},//@(32)
{0x00,0x00,0x10,0x10,0x10,0x28,0x28,0x28,0x44,0x44,0x7C,0x82,0x82,0x82,0x00,0x00},//A(33)
{0x00,0x00,0x3E,0x42,0x82,0x82,0x42,0x3E,0x42,0x82,0x82,0x82,0x42,0x3E,0x00,0x00},
{0x00,0x00,0x38,0x44,0x82,0x82,0x02,0x02,0x02,0x02,0x82,0x82,0x44,0x38,0x00,0x00},
{0x00,0x00,0x3E,0x42,0x42,0x82,0x82,0x82,0x82,0x82,0x82,0x42,0x42,0x3E,0x00,0x00},
{0x00,0x00,0xFE,0x02,0x02,0x02,0x02,0x7E,0x02,0x02,0x02,0x02,0x02,0xFE,0x00,0x00},
{0x00,0x00,0xFE,0x02,0x02,0x02,0x02,0x7E,0x02,0x02,0x02,0x02,0x02,0x02,0x00,0x00},
{0x00,0x00,0x38,0x44,0x82,0x02,0x02,0x02,0xE2,0x82,0x82,0x82,0xC4,0xB8,0x00,0x00},
{0x00,0x00,0x82,0x82,0x82,0x82,0x82,0xFE,0x82,0x82,0x82,0x82,0x82,0x82,0x00,0x00},
{0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x22,0x22,0x1C,0x00,0x00},
{0x00,0x00,0x82,0x42,0x22,0x12,0x0A,0x06,0x06,0x0A,0x12,0x22,0x42,0x82,0x00,0x00},
{0x00,0x00,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x7E,0x00,0x00},
{0x00,0x00,0x82,0x82,0xC6,0xC6,0xAA,0xAA,0x92,0x92,0x92,0x82,0x82,0x82,0x00,0x00},
{0x00,0x00,0x82,0x86,0x86,0x8A,0x8A,0x92,0x92,0xA2,0xA2,0xC2,0xC2,0x82,0x00,0x00},
{0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x44,0x38,0x00,0x00},
{0x00,0x00,0x3E,0x42,0x82,0x82,0x82,0x42,0x3E,0x02,0x02,0x02,0x02,0x02,0x00,0x00},
{0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0xA2,0x44,0xB8,0x00,0x00},
{0x00,0x00,0x3E,0x42,0x82,0x82,0x82,0x42,0x3E,0x42,0x82,0x82,0x82,0x82,0x00,0x00},
{0x00,0x00,0x7C,0x82,0x82,0x02,0x04,0x18,0x20,0x40,0x80,0x82,0x82,0x7C,0x00,0x00},
{0x00,0x00,0xFE,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x7C,0x00,0x00},
{0x00,0x00,0x82,0x82,0x82,0x44,0x44,0x44,0x28,0x28,0x28,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x92,0x92,0x92,0x92,0x92,0xAA,0xAA,0xAA,0x44,0x44,0x44,0x44,0x00,0x00},
{0x00,0x00,0x82,0x82,0x44,0x44,0x28,0x10,0x28,0x28,0x44,0x44,0x82,0x82,0x00,0x00},
{0x00,0x00,0x82,0x82,0x44,0x44,0x28,0x28,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x7E,0x40,0x20,0x20,0x10,0x10,0x08,0x08,0x04,0x04,0x02,0x7E,0x00,0x00},
{0x00,0x78,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x78,0x00},
{0x00,0x00,0x92,0x92,0x92,0xFF,0x92,0xAA,0xAA,0xAA,0x44,0x44,0x44,0x44,0x00,0x00},
{0x00,0x1E,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x1E,0x00},
{0x00,0x10,0x28,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00},
{0x00,0x04,0x08,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x40,0x7C,0x42,0x42,0x42,0xBC,0x00,0x00},
{0x00,0x00,0x02,0x02,0x02,0x02,0x3A,0x46,0x82,0x82,0x82,0x82,0x46,0x3A,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x84,0x02,0x02,0x02,0x02,0x84,0x78,0x00,0x00},
{0x00,0x00,0x80,0x80,0x80,0x80,0xB8,0xC4,0x82,0x82,0x82,0x82,0xC4,0xB8,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x44,0x82,0xFE,0x02,0x02,0x84,0x78,0x00,0x00},
{0x00,0x00,0x70,0x08,0x08,0x08,0x7E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x58,0x64,0x42,0x42,0x42,0x64,0x58,0x42,0x3C,0x00},
{0x00,0x00,0x02,0x02,0x02,0x02,0x3A,0x46,0x42,0x42,0x42,0x42,0x42,0x42,0x00,0x00},
{0x00,0x00,0x10,0x10,0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x10,0x10,0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x0C,0x00},
{0x00,0x00,0x02,0x02,0x02,0x42,0x22,0x12,0x0A,0x06,0x0A,0x12,0x22,0x42,0x00,0x00},
{0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x6E,0x92,0x92,0x92,0x92,0x92,0x92,0x92,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x3A,0x46,0x42,0x42,0x42,0x42,0x42,0x42,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x44,0x38,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x3A,0x46,0x82,0x82,0x82,0x46,0x3A,0x02,0x02,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0xB8,0xC4,0x82,0x82,0x82,0xC4,0xB8,0x80,0x80,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x74,0x0C,0x04,0x04,0x04,0x04,0x04,0x04,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x02,0x0C,0x30,0x40,0x42,0x3C,0x00,0x00},
{0x00,0x00,0x08,0x08,0x08,0x08,0x7E,0x08,0x08,0x08,0x08,0x08,0x08,0x70,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x7C,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x82,0x44,0x44,0x28,0x28,0x10,0x10,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x92,0x92,0x92,0xAA,0x6C,0x44,0x44,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x44,0x28,0x10,0x10,0x28,0x44,0x82,0x00,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x82,0x44,0x44,0x28,0x28,0x10,0x10,0x0E,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x40,0x20,0x10,0x08,0x04,0x02,0x7E,0x00,0x00},
{0x00,0x60,0x10,0x10,0x10,0x10,0x10,0x0C,0x10,0x10,0x10,0x10,0x10,0x10,0x60,0x00},
{0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00},
{0x00,0x06,0x08,0x08,0x08,0x08,0x08,0x30,0x08,0x08,0x08,0x08,0x08,0x08,0x06,0x00},
{0x00,0x00,0x00,0x00,0x00,0x00,0x8C,0x72,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
};	


/*--------------------------------------------------------------*/
//液晶字符输出(8*16字体)
//x: 0 -15   (行)
//y: 0 -9  	 (列)
void LCD_printc16(uint8 x, uint8 y, uint8 c_dat,uint16 word_color,uint16 back_color)
{
	uint8 i,j;

	ILI9163B_SetPos(x*8,y*16,(x+1)*8-1,(y+1)*16-1);			//定位字符显示区域

	for(j=0; j <16; j++)
	{
		for(i=0; i<8; i++)
		{
			if((Font_code16[c_dat-32][j]) & (0x01<<i))
				ILI9163B_write_para16(word_color);
			else
				ILI9163B_write_para16(back_color);
		}
	}
}

/*--------------------------------------------------------------*/
//液晶字符串输出(8*16字体)
//x: 0 - 15 (行)
//y: 0 - 9  (列)
void LCD_prints16(uint8 x, uint8 y, uint8 *s_dat,uint16 word_color,uint16 back_color)
{
	while(*s_dat) LCD_printc16(x++, y, *s_dat++,word_color,back_color);
}
/*--------------------------------------------------------------*/

/*--------------------------------------------------------------*/
//液晶字符输出(6*8字体)
//x: 0 - 20	(行)
//y: 0 -19	(列)
void LCD_printc6(uint8 x, uint8 y, uint8 c_dat,uint16 word_color,uint16 back_color)
{
	uint8 i,j;

	ILI9163B_SetPos(x*6,y*8,(x+1)*6-1,(y+1)*8-1);			//定位字符显示区域

	for(j=0; j<8; j++)
	{
		for(i=0; i<6; i++)
		{
			if((Font_code8[c_dat-32][i]) & (0x01<<j))
				ILI9163B_write_para16(word_color);
			else
				ILI9163B_write_para16(back_color);
		}
	}
}

/*--------------------------------------------------------------*/
//液晶字符串输出(6*8字体)
//x: 0 - 20 (行)
//y: 0 -19 (列)
void LCD_prints6(uint8 x, uint8 y, uint8 *s_dat,uint16 word_color,uint16 back_color)
{
	while(*s_dat) LCD_printc6(x++, y, *s_dat++,word_color,back_color);
}

/*--------------------------------------------------------------*/ 
//定位输出数字
//x: 0 - 20  (行)
//y: 0 - 19 (列)
//num: 0 - 65535	要显示的数字
//num_bit: 0 - 5	数字的位数
void LCD_printn6(uint8 x, uint8 y, uint16 num, uint8 num_bit,uint16 word_color,uint16 back_color)
{
	char i;
	uint8 ii;
	uint8 dat[6];
	for(i = 0; i < 6; i++) dat[i] = 0; i = 0;	//初始化数据
	while(num / 10)								//拆位
	{
		dat[i] = num % 10;						//最低位
		num /= 10; i++;		
	}
	dat[i] = num;								//最高位
	ii = i;										//保存dat的位数
	for(; i >= 0; i--)	dat[i] += 48;			//转化成ASCII
	for(i = 0; i < num_bit; i++)
	LCD_printc6(x, y + i, ' ',word_color,back_color);		//清显示区域
	for(i = ii; i >= 0; i--)
	LCD_printc6(x++, y, dat[i],word_color,back_color);		//输出数值
}
/*--------------------------------------------------------------*/

/*--------------------------------------------------------------*/
//液晶字符输出(8*8字体)
//x: 0 - 15	(行)
//y: 0 -19	(列)
void LCD_printc(uint8 x, uint8 y, uint8 c_dat,uint16 word_color,uint16 back_color)
{
	uint8 i,j;

	ILI9163B_SetPos(x*8,y*8,(x+1)*8-1,(y+1)*8-1);			//定位字符显示区域

	for(j=0; j<8; j++)
	{
		ILI9163B_write_para16(back_color);
		for(i=0; i<6; i++)
		{
			if((Font_code8[c_dat-32][i]) & (0x01<<j))
				ILI9163B_write_para16(word_color);
			else
				ILI9163B_write_para16(back_color);
		}
		ILI9163B_write_para16(back_color);
	}
}

/*--------------------------------------------------------------*/
//液晶字符串输出(8*8字体)
//x: 0 - 15 (行)
//y: 0 -19 (列)
void LCD_prints(uint8 x, uint8 y, uint8 *s_dat,uint16 word_color,uint16 back_color)
{
	while(*s_dat) LCD_printc(x++, y, *s_dat++,word_color,back_color);
}

/*--------------------------------------------------------------*/ 
//定位输出数字
//x: 0 - 15  (行)
//y: 0 - 19 (列)
//num: 0 - 65535	要显示的数字
//num_bit: 0 - 5	数字的位数
void LCD_printn(uint8 x, uint8 y, uint16 num, uint8 num_bit,uint16 word_color,uint16 back_color)
{
	char i;
	uint8 ii;
	uint8 dat[6];
	for(i = 0; i < 6; i++) dat[i] = 0; i = 0;	//初始化数据
	while(num / 10)								//拆位
	{
		dat[i] = num % 10;						//最低位
		num /= 10; i++;		
	}
	dat[i] = num;								//最高位
	ii = i;										//保存dat的位数
	for(; i >= 0; i--)	dat[i] += 48;			//转化成ASCII
	for(i = 0; i < num_bit; i++)
	LCD_printc(x, y + i, ' ',word_color,back_color);					//清显示区域
	for(i = ii; i >= 0; i--)
	LCD_printc(x, y++, dat[i],word_color,back_color);					//输出数值
}


                 
